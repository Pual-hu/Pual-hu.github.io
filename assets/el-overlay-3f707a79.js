import{q as te,y as de,z as fe,A as W,B as me,C as ve,D as Z,G as pe,H as se,I as J,J as j,K as ye,L as ge,M as Ce,N as be,O as U,P as G,Q as q,d as Y,b as R,R as V,S as b,T as he,U as ke,V as we,W as _,X as Ee,Y as O,o as A,k as X,j as H,Z as k,u as o,v as Me,w as S,c as K,$ as De,n as Ie,a0 as x,a1 as le,a2 as ne,a3 as Se,a4 as Te,a5 as Be,a6 as $e,a7 as Q,a as T,a8 as Le,a9 as Ae,aa as Oe,ab as Fe,ac as ee,ad as Pe,ae as oe,af as ze,s as Ne,ag as Re,ah as Ye,ai as He,aj as Ue,ak as Ve,al as Xe,am as We}from"./index-306901b4.js";import{U as ae}from"./el-checkbox-b73071a6.js";import{g as je}from"./scroll-fe39b4a8.js";const ue=Symbol("dialogInjectionKey"),qe=(e,t,i)=>{let a={offsetX:0,offsetY:0};const r=n=>{const c=n.clientX,v=n.clientY,{offsetX:m,offsetY:p}=a,s=e.value.getBoundingClientRect(),f=s.left,w=s.top,F=s.width,P=s.height,z=document.documentElement.clientWidth,B=document.documentElement.clientHeight,N=-f+m,$=-w+p,E=z-f-F+m,M=B-w-P+p,L=h=>{const l=Math.min(Math.max(m+h.clientX-c,N),E),C=Math.min(Math.max(p+h.clientY-v,$),M);a={offsetX:l,offsetY:C},e.value.style.transform=`translate(${W(l)}, ${W(C)})`},y=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",y)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",r)},u=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",r)};te(()=>{de(()=>{i.value?d():u()})}),fe(()=>{u()})},Ke=e=>{me(e)||ve("[useLockscreen]","You need to pass a ref param to this function");const t=Z("popup"),i=pe(()=>t.bm("parent","hidden"));if(!se||J(document.body,i.value))return;let a=0,r=!1,d="0";const u=()=>{setTimeout(()=>{be(document==null?void 0:document.body,i.value),r&&document&&(document.body.style.width=d)},200)};j(e,n=>{if(!n){u();return}r=!J(document.body,i.value),r&&(d=document.body.style.width),a=je(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,v=ye(document.body,"overflowY");a>0&&(c||v==="scroll")&&r&&(document.body.style.width=`calc(100% - ${a}px)`),ge(document.body,i.value)}),Ce(()=>u())},ie=e=>{if(!e)return{onClick:U,onMousedown:U,onMouseup:U};let t=!1,i=!1;return{onClick:u=>{t&&i&&e(u),t=i=!1},onMousedown:u=>{t=u.target===u.currentTarget},onMouseup:u=>{i=u.target===u.currentTarget}}},xe=G({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:q([String,Array,Object])},zIndex:{type:q([String,Number])}}),Ze={click:e=>e instanceof MouseEvent};var Ge=Y({name:"ElOverlay",props:xe,emits:Ze,setup(e,{slots:t,emit:i}){const a=Z("overlay"),r=c=>{i("click",c)},{onClick:d,onMousedown:u,onMouseup:n}=ie(e.customMaskEvent?void 0:r);return()=>e.mask?R("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:n},[b(t,"default")],V.STYLE|V.CLASS|V.PROPS,["onClick","onMouseup","onMousedown"]):he("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[b(t,"default")])}});const Je=Ge,re=G({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:ke},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),_e={close:()=>!0},Qe=["aria-label"],eo=["id"],oo=Y({name:"ElDialogContent"}),to=Y({...oo,props:re,emits:_e,setup(e){const t=e,{t:i}=we(),{Close:a}=Se,{dialogRef:r,headerRef:d,bodyId:u,ns:n,style:c}=_(ue),{focusTrapRef:v}=_(Ee),m=Te(v,r),p=O(()=>t.draggable);return qe(r,d,p),(s,f)=>(A(),X("div",{ref:o(m),class:k([o(n).b(),o(n).is("fullscreen",s.fullscreen),o(n).is("draggable",o(p)),o(n).is("align-center",s.alignCenter),{[o(n).m("center")]:s.center},s.customClass]),style:le(o(c)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:d,class:k(o(n).e("header"))},[b(s.$slots,"header",{},()=>[H("span",{role:"heading",class:k(o(n).e("title"))},Me(s.title),3)]),s.showClose?(A(),X("button",{key:0,"aria-label":o(i)("el.dialog.close"),class:k(o(n).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=w=>s.$emit("close"))},[R(o(Ie),{class:k(o(n).e("close"))},{default:S(()=>[(A(),K(De(s.closeIcon||o(a))))]),_:1},8,["class"])],10,Qe)):x("v-if",!0)],2),H("div",{id:o(u),class:k(o(n).e("body"))},[b(s.$slots,"default")],10,eo),s.$slots.footer?(A(),X("footer",{key:0,class:k(o(n).e("footer"))},[b(s.$slots,"footer")],2)):x("v-if",!0)],6))}});var so=ne(to,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=G({...re,appendToBody:{type:Boolean,default:!1},beforeClose:{type:q(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),no={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>Be(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ao=(e,t)=>{const a=Fe().emit,{nextZIndex:r}=$e();let d="";const u=Q(),n=Q(),c=T(!1),v=T(!1),m=T(!1),p=T(e.zIndex||r());let s,f;const w=Le("namespace",Ae),F=O(()=>{const g={},I=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(g[`${I}-margin-top`]=e.top),e.width&&(g[`${I}-width`]=W(e.width))),g}),P=O(()=>e.alignCenter?{display:"flex"}:{});function z(){a("opened")}function B(){a("closed"),a(ae,!1),e.destroyOnClose&&(m.value=!1)}function N(){a("close")}function $(){f==null||f(),s==null||s(),e.openDelay&&e.openDelay>0?{stop:s}=ee(()=>y(),e.openDelay):y()}function E(){s==null||s(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=ee(()=>h(),e.closeDelay):h()}function M(){function g(I){I||(v.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(g):E()}function L(){e.closeOnClickModal&&M()}function y(){se&&(c.value=!0)}function h(){c.value=!1}function l(){a("openAutoFocus")}function C(){a("closeAutoFocus")}function D(g){var I;((I=g.detail)==null?void 0:I.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&Ke(c);function ce(){e.closeOnPressEscape&&M()}return j(()=>e.modelValue,g=>{g?(v.value=!1,$(),m.value=!0,p.value=e.zIndex?p.value++:r(),Oe(()=>{a("open"),t.value&&(t.value.scrollTop=0)})):c.value&&E()}),j(()=>e.fullscreen,g=>{t.value&&(g?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),te(()=>{e.modelValue&&(c.value=!0,m.value=!0,$())}),{afterEnter:z,afterLeave:B,beforeLeave:N,handleClose:M,onModalClick:L,close:E,doClose:h,onOpenAutoFocus:l,onCloseAutoFocus:C,onCloseRequested:ce,onFocusoutPrevented:D,titleId:u,bodyId:n,closed:v,style:F,overlayDialogStyle:P,rendered:m,visible:c,zIndex:p}},uo=["aria-label","aria-labelledby","aria-describedby"],io=Y({name:"ElDialog",inheritAttrs:!1}),ro=Y({...io,props:lo,emits:no,setup(e,{expose:t}){const i=e,a=Pe();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},O(()=>!!a.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},O(()=>!!i.customClass));const r=Z("dialog"),d=T(),u=T(),n=T(),{visible:c,titleId:v,bodyId:m,style:p,overlayDialogStyle:s,rendered:f,zIndex:w,afterEnter:F,afterLeave:P,beforeLeave:z,handleClose:B,onModalClick:N,onOpenAutoFocus:$,onCloseAutoFocus:E,onCloseRequested:M,onFocusoutPrevented:L}=ao(i,d);ze(ue,{dialogRef:d,headerRef:u,bodyId:m,ns:r,rendered:f,style:p});const y=ie(N),h=O(()=>i.draggable&&!i.fullscreen);return t({visible:c,dialogContentRef:n}),(l,C)=>(A(),K(Xe,{to:"body",disabled:!l.appendToBody},[R(Ve,{name:"dialog-fade",onAfterEnter:o(F),onAfterLeave:o(P),onBeforeLeave:o(z),persisted:""},{default:S(()=>[Ne(R(o(Je),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(w)},{default:S(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(m),class:k(`${o(r).namespace.value}-overlay-dialog`),style:le(o(s)),onClick:C[0]||(C[0]=(...D)=>o(y).onClick&&o(y).onClick(...D)),onMousedown:C[1]||(C[1]=(...D)=>o(y).onMousedown&&o(y).onMousedown(...D)),onMouseup:C[2]||(C[2]=(...D)=>o(y).onMouseup&&o(y).onMouseup(...D))},[R(o(Re),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o($),onFocusAfterReleased:o(E),onFocusoutPrevented:o(L),onReleaseRequested:o(M)},{default:S(()=>[o(f)?(A(),K(so,Ye({key:0,ref_key:"dialogContentRef",ref:n},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:o(h),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(B)}),He({header:S(()=>[l.$slots.title?b(l.$slots,"title",{key:1}):b(l.$slots,"header",{key:0,close:o(B),titleId:o(v),titleClass:o(r).e("title")})]),default:S(()=>[b(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:S(()=>[b(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):x("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,uo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ue,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var co=ne(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const po=We(co);export{po as E};
