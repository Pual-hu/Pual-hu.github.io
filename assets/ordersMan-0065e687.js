import{d as T,a as $,r as w,o as a,k as f,j as C,b as o,u as m,w as l,F as h,ao as B,e as p,v as F,c as _,a0 as v,W as P,f as z,an as D}from"./index-306901b4.js";import{a as M}from"./el-table-column-c5104fff.js";import"./el-checkbox-b73071a6.js";import"./el-tag-9880a22b.js";import{E as j}from"./el-popover-cf429df4.js";import{E as U}from"./el-input-4b781430.js";import{b as q,c as L}from"./el-select-1fe09a52.js";import{_ as W}from"./Table.vue_vue_type_script_setup_true_lang-0361e66c.js";import{a as b}from"./myaxios-1ccddccb.js";import"./index-d5ca4fd7.js";import"./scroll-fe39b4a8.js";const A={style:{display:"flex","margin-left":"12px"}},G={key:0},H={key:1},J={key:2},ae=T({__name:"ordersMan",setup(K){let r=$(),I=P("filters"),c=w({orderNo:"",orderStatus:""}),V=w({statusOptions:[{value:"",label:"全部"},{value:0,label:"待支付"},{value:1,label:"已支付"},{value:2,label:"配货完成"},{value:3,label:"出库成功"},{value:4,label:"交易成功"},{value:-1,label:"手动关闭"},{value:-2,label:"超时关闭"},{value:-3,label:"商家关闭"}]});const y=function(n){let t;if(n)t=[n];else{if(!r.value.multipleSelection||r.value.multipleSelection.length===0)return console.log("请选择需要关闭的订单"),!1;t=r.value.multipleSelection.map(s=>{s.orderId})}b.put("/orders/close",{ids:t}).then(()=>{console.log("关闭成功"),r.value.getFromInfos(1)})},x=function(n){let t;if(n)t=[n];else{if(!r.value.multipleSelection||r.value.multipleSelection.length===0)return console.log("请选择需要出库的订单"),!1;t=r.value.multipleSelection.map(s=>{s.orderId})}b.put("/orders/checkOut",{ids:t}).then(()=>{console.log("出库成功"),r.value.getFromInfos(1)})},g=n=>{let t;if(n)t=[n];else{if(!r.value.multipleSelection||r.value.multipleSelection.length===0)return console.log("请选择需要配货的订单"),!1;t=r.value.multipleSelection.map(s=>{s.orderId})}b.put("/orders/checkDone",{ids:t}).then(()=>{console.log("配货成功"),r.value.getFromInfos()})},k=function(){r.value.getFromInfos(1)};return(n,t)=>{const s=U,E=L,N=q,i=z,d=j,u=M,O=D("router-link");return a(),f(h,null,[C("div",A,[o(s,{modelValue:m(c).orderNo,"onUpdate:modelValue":t[0]||(t[0]=e=>m(c).orderNo=e),placeholder:"请输入订单号",onChange:k},null,8,["modelValue"]),o(N,{modelValue:m(c).orderStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>m(c).orderStatus=e),placeholder:"请选择订单状态",onChange:k},{default:l(()=>[(a(!0),f(h,null,B(m(V).statusOptions,e=>(a(),_(E,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(d,{title:"确定关闭订单吗？","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:t[2]||(t[2]=e=>g(void 0))},{reference:l(()=>[o(i,{type:"primary"},{default:l(()=>[p("配货完成")]),_:1})]),_:1}),o(d,{title:"确定关闭订单吗？","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:t[3]||(t[3]=e=>x(void 0))},{reference:l(()=>[o(i,{type:"primary"},{default:l(()=>[p("出库")]),_:1})]),_:1}),o(d,{title:"确定关闭订单吗？","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:t[4]||(t[4]=e=>y(void 0))},{reference:l(()=>[o(i,{type:"danger"},{default:l(()=>[p("关闭订单")]),_:1})]),_:1})]),o(W,{action:"/orders",ref_key:"table",ref:r,extraParams:m(c)},{myTable:l(()=>[o(u,{fixed:"",type:"selection",width:"55"}),o(u,{property:"orderNo",label:"订单号",width:"220"}),o(u,{property:"totalPrice",label:"订单总价",width:"120"}),o(u,{prop:"orderStatus",label:"订单状态"},{default:l(e=>[C("span",null,F(m(I).orderMap(e.row.orderStatus)),1)]),_:1}),o(u,{prop:"payType",label:"支付方式"},{default:l(e=>[e.row.payType==1?(a(),f("span",G,"微信支付")):e.row.payType==2?(a(),f("span",H,"支付宝支付")):(a(),f("span",J,"未知"))]),_:1}),o(u,{property:"createTime",label:"创建时间",width:"200"}),o(u,{label:"操作",width:"200"},{default:l(e=>[e.row.orderStatus==1?(a(),_(d,{key:0,title:"确定配货完成吗？","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:S=>g(e.row.orderId)},{reference:l(()=>[o(i,{link:"",type:"primary",size:"small"},{default:l(()=>[p("配货完成")]),_:1})]),_:2},1032,["onConfirm"])):v("",!0),e.row.orderStatus==2?(a(),_(d,{key:1,title:"确定出库吗？","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:S=>x(e.row.orderId)},{reference:l(()=>[o(i,{link:"",type:"primary",size:"small"},{default:l(()=>[p("出库")]),_:1})]),_:2},1032,["onConfirm"])):v("",!0),e.row.orderStatus==4||e.row.orderStatus<0?v("",!0):(a(),_(d,{key:2,title:"确定关闭订单吗？","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:S=>y(e.row.orderId)},{reference:l(()=>[o(i,{link:"",type:"primary",size:"small"},{default:l(()=>[p("关闭订单")]),_:1})]),_:2},1032,["onConfirm"])),o(O,{to:{path:"/orderDetail",query:{id:e.row.orderId}}},{default:l(()=>[o(i,{link:"",type:"primary",size:"small"},{default:l(()=>[p("订单详情")]),_:1})]),_:2},1032,["to"])]),_:1})]),_:1},8,["extraParams"])],64)}}});export{ae as default};
